import{T as n,j as e}from"./dates.f0d6c0ca.js";import{C,a as S,P as y,A as w,L as T,B as v,p as E,b as M,c as _,d as k,e as F}from"./index.74d5ba86.js";import{o as A}from"./options.3d8c69a9.js";import{r as h}from"./index.72123234.js";C.register(S,y,w,T,v,E,M,_);function P({name:a,time:l}){const s=["Caja","Crédito","Afiliación","Ahorro","Seguros","Auxilios","Estado","Otros"],[g,o]=h.useState(s.reduce((r,c)=>(r[c]=n.filter(m=>m.type2===c).length,r),{})),[u,d]=h.useState(s.map(r=>(g[r]/n.length*100).toFixed(2))),[i,x]=h.useState("Todas las Sucursales");h.useEffect(()=>{const r=new Date;let c=r.getMonth()+1,m=n.filter(t=>Number(t.date.split("-")[1])===c);a=="all"&&(c=l===0?r.getMonth()+1:r.getMonth(),m=n.filter(t=>Number(t.date.split("-")[1])===c),l===2&&(c=r.getMonth()-1,m=n.filter(t=>Number(t.date.split("-")[1])>=c)),x("Todas las Sucursales")),a!="all"&&(c=l===0?r.getMonth()+1:r.getMonth(),m=n.filter(t=>t.city==a&&Number(t.date.split("-")[1])===c),l===2&&(c=r.getMonth()-1,m=n.filter(t=>t.city==a&&Number(t.date.split("-")[1])>=c)),x(a));const f=s.reduce((t,p)=>(t[p]=m.filter(z=>z.type2===p).length,t),{});o(Object.values(f));const j=Object.values(f).reduce((t,p)=>t+p,0),N=s.map(t=>(f[t]/j*100).toFixed(2));d(N)},[a,l]);const b={labels:s,datasets:[{data:g,backgroundColor:["rgba(255, 99, 132, 0.5)","rgba(183, 46, 168, 0.5)","rgba(72, 209, 168, 0.5)","rgba(72, 209, 0, 0.5)","rgba(220, 19, 0, 0.5)","rgba(255, 99, 132, 0.5)","rgba(183, 46, 168, 0.5)","rgba(72, 209, 168, 0.5)"],borderColor:["rgba(255, 99, 132)","rgba(183, 46, 168)","rgba(72, 209, 168)","rgba(72, 209, 0)","rgba(220, 19, 0)","rgba(255, 99, 132)","rgba(183, 46, 168)","rgba(72, 209, 168)"],borderWidth:2}]};return e.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 mt-28 rounded-lg w-[65%] h-auto",children:[e.jsxs("h4",{className:"text-white",children:["Tipos de Turnos Tomados en ",i]}),e.jsx(k,{data:b,options:A}),e.jsxs("table",{className:"text-white mt-8",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-center",children:"Tipo Turno"}),s.map((r,c)=>e.jsx("th",{className:"p-2 text-center",children:r},c))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 text-center",children:"Procentaje"}),u.map((r,c)=>e.jsxs("td",{className:"text-center",children:[r,"%"]},c))]})]})]})}function D({name:a}){const[l,s]=h.useState(n),[g,o]=h.useState();h.useEffect(()=>{a=="all"&&(s(n),o("Todas las Sucursales")),a!="all"&&(s(n.filter(t=>t.city===a)),o(a))},[a]);const u=["Sin calificar","Calificado en Sucursal","Calificado por SMS","Calificado por llamada"],d=l.filter(t=>t.score_time==="empty").length,i=l.filter(t=>t.score_time!="empty"&&t.state==="finished"&&t.sms_send!="send").length,x=l.filter(t=>t.score_time!="empty"&&t.state==="finished"&&t.sms_send==="send").length,b=l.filter(t=>t.score_time!="empty"&&t.state==="by_call").length,r=(d/l.length*100).toFixed(2),c=(i/l.length*100).toFixed(2),m=(x/l.length*100).toFixed(2),f=(b/l.length*100).toFixed(2),j={labels:u,datasets:[{data:[d,i,x,b],backgroundColor:["rgba(155, 79, 162, 0.5)","rgba(153, 66, 138, 0.5)","rgba(123, 56, 158, 0.5)","rgba(92, 189, 148, 0.5)"],borderColor:["rgba(155, 79, 162)","rgba(153, 66, 138)","rgba(123, 56, 158)","rgba(92, 189, 148)"]}]},N={plugins:{legend:{display:!1}}};return e.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 mt-20 rounded-lg w-[55%] h-auto",children:[e.jsxs("h5",{className:"text-white pb-3 text-sm",children:["Estados de Calificación de Turno en ",g]}),e.jsx("div",{className:"w-[250px]",children:e.jsx(F,{data:j,options:N})}),e.jsxs("table",{className:"text-white mt-8",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-center text-sm",children:"Estado de Turno"}),u.map((t,p)=>e.jsx("th",{className:"p-2 text-center text-sm",children:t},p))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 text-center text-sm",children:"Procentaje"}),e.jsxs("td",{className:"p-2 text-center text-sm",children:[r," %"]}),e.jsxs("td",{className:"p-2 text-center text-sm",children:[c," %"]}),e.jsxs("td",{className:"p-2 text-center text-sm",children:[m," %"]}),e.jsxs("td",{className:"p-2 text-center text-sm",children:[f," %"]})]})]})]})}C.register(S,y,w,T,v,E,M,_);function O({name:a}){const[l,s]=h.useState(n),[g,o]=h.useState();h.useEffect(()=>{a=="all"&&(s(n),o("Todas las Sucursales")),a!="all"&&(s(n.filter(x=>x.city===a)),o(a))},[a]);const u=["Caja","Crédito","Afiliación","Ahorro","Seguros","Auxilios","Estado de cuenta","Otros"],d=u.reduce((x,b)=>(x[b]=l.filter(r=>r.type2===b).length,x),{}),i={labels:u,datasets:[{data:Object.values(d),backgroundColor:["rgba(255, 99, 132, 0.5)","rgba(183, 46, 168, 0.5)","rgba(72, 209, 168, 0.5)","rgba(72, 209, 0, 0.5)","rgba(220, 19, 0, 0.5)","rgba(255, 99, 132, 0.5)","rgba(183, 46, 168, 0.5)","rgba(72, 209, 168, 0.5)"],borderColor:["rgba(255, 99, 132)","rgba(183, 46, 168)","rgba(72, 209, 168)","rgba(72, 209, 0)","rgba(220, 19, 0)","rgba(255, 99, 132)","rgba(183, 46, 168)","rgba(72, 209, 168)"],borderWidth:2}]};return e.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 mt-20 rounded-lg w-[70%] h-auto",children:[e.jsxs("h4",{className:"text-white",children:["Tipos de Turnos Tomados en ",g]}),e.jsx(k,{data:i,options:A}),e.jsx("table",{children:e.jsx("tr",{children:e.jsx("th",{children:"Estado de Calificación"})})})]})}function W(){const a=n.map(i=>i.city),l=[...new Set(a)],[s,g]=h.useState("all"),[o,u]=h.useState(0);function d(i,x){g(i),u(x)}return e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsxs("nav",{className:"flex flex-col p-3 px-20 mt-5 fixed top-0 bg-zinc-700 rounded-lg items-center",children:[e.jsxs("ul",{className:"flex flex-row gap-10",children:[e.jsx("button",{className:s==="all"?"text-white text-xl":"text-zinc-400 hover:scale-110  hover:text-white",onClick:()=>d("all",o),children:"Global"},"todos"),l.map(i=>e.jsx("button",{className:s===i?"text-white text-xl":"text-zinc-400 hover:scale-110  hover:text-white",onClick:()=>d(i,o),children:i},i))]}),e.jsxs("ul",{className:"flex flex-row gap-10 text-zinc-400",children:[e.jsx("button",{className:o===0?"text-white text-xl":"text-zinc-400 hover:scale-110 hover:text-white",onClick:()=>d(s,0),children:"Mes Acutual"}),e.jsx("button",{className:o===1?"text-white text-xl":"text-zinc-400 hover:scale-110 hover:text-white",onClick:()=>d(s,1),children:"Ultimo mes"}),e.jsx("button",{className:o===2?"text-white text-xl":"text-zinc-400 hover:scale-110 hover:text-white",onClick:()=>d(s,2),children:"Ultimos 3 meses"})]})]}),e.jsx(P,{name:s,time:o}),e.jsx(D,{name:s}),e.jsx(O,{name:s})]})}export{W as default};
