import{j as e,T as b}from"./dates.e9e21c89.js";import{C as M,a as E,P as A,A as F,L as D,B as _,p as O,b as k,c as B,d as G,e as I,f as $,g as H}from"./index.f8b4ff70.js";import{o as z}from"./options.f2ef4408.js";import{r as h}from"./index.72123234.js";import"./turns.6c01899b.js";M.register(E,A,F,D,_,O,k,B);function J({name:r,time:l}){const t=["Caja","Crédito","Afiliación","Ahorro","Seguros","Auxilios","Estado","Otros"],[c,s]=h.useState([]);function i(u,m,j){const d=new Date;let x=d.getFullYear(),f=m===0?d.getMonth()+1:d.getMonth(),g;return f==0?(x=d.getFullYear()-1,g=j.filter(p=>Number(p.date.split("-")[1])===12&&Number(p.date.split("-")[0])===x)):g=j.filter(p=>Number(p.date.split("-")[1])===f&&Number(p.date.split("-")[0])===x),m===2&&(f=d.getMonth()-1,f<0?g=j.filter(p=>Number(p.date.split("-")[1])>=12+f&&Number(p.date.split("-")[0])===x):g=j.filter(p=>Number(p.date.split("-")[1])>=f&&Number(p.date.split("-")[0])===x)),u==="all"?g:g.filter(p=>p.city===u)}h.useEffect(()=>{const u=i(r,l,b);s(u)},[r,l]);const a=t.reduce((u,m)=>(u[m]=c.filter(j=>j.type2===m).length,u),{}),n=Object.values(a).reduce((u,m)=>u+m,0),w=t.map(u=>(a[u]/n*100).toFixed(2)),v={labels:t,datasets:[{data:a,backgroundColor:["rgba(255, 99, 132, 0.5)","rgba(183, 46, 168, 0.5)","rgba(72, 209, 168, 0.5)","rgba(72, 209, 0, 0.5)","rgba(220, 19, 0, 0.5)","rgba(255, 99, 132, 0.5)","rgba(183, 46, 168, 0.5)","rgba(72, 209, 168, 0.5)"],borderColor:["rgba(255, 99, 132)","rgba(183, 46, 168)","rgba(72, 209, 168)","rgba(72, 209, 0)","rgba(220, 19, 0)","rgba(255, 99, 132)","rgba(183, 46, 168)","rgba(72, 209, 168)"],borderWidth:2}]};return e.jsxs("div",{className:"flex flex-row w-[85%] p-10 pb-20 gap-5 items-center",children:[e.jsx("p",{className:"text-white w-52",children:"Tipos de turnos tomados por nuestros asociados, en cada una de las sucursales. Durante el mes actual, el mes pasado o durante los 3 ultimos meses."}),e.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 mt-5 rounded-lg",children:[e.jsx(G,{data:v,options:z}),e.jsxs("table",{className:"text-white mt-8",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-center",children:"Tipo Turno"}),t.map((u,m)=>e.jsx("th",{className:"p-2 text-center",children:u},m))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 text-center",children:"Procentaje"}),w.map((u,m)=>e.jsxs("td",{className:"text-center",children:[u,"%"]},m))]})]})]})]})}M.register(E,A,F,D,_,O,k,B);function K({name:r,time:l}){const t=["Sin calificar","Calificado en Sucursal","Calificado por SMS","Calificado por llamada","No contactado"],[c,s]=h.useState(),[i,a]=h.useState([]);h.useState([]),h.useEffect(()=>{n(b,r,l)},[r,l]);function n(o,y,Y){const T=new Date;let R=T.getFullYear(),S=Y===0?T.getMonth()+1:T.getMonth(),C=o.filter(N=>Number(N.date.split("-")[1])===S);S==0?(R=T.getFullYear()-1,C=o.filter(N=>Number(N.date.split("-")[1])===12&&Number(N.date.split("-")[0])===R)):C=o.filter(N=>Number(N.date.split("-")[1])===S&&Number(N.date.split("-")[0])===R),Y===2&&(S=T.getMonth()-1,S<0?C=o.filter(N=>Number(N.date.split("-")[1])>=12+S):C=o.filter(N=>Number(N.date.split("-")[1])>=S)),y=="all"&&(a(C),s("Todas las Sucursales")),y!="all"&&(a(C.filter(N=>N.city===y)),s(y))}const w=i.filter(o=>o.score_time==="empty").length,v=i.filter(o=>o.score_time!="empty"&&o.state==="finished"&&o.sms_send!="send").length,u=i.filter(o=>o.score_time!="empty"&&o.state==="finished"&&o.sms_send==="send").length,m=i.filter(o=>o.score_time!="empty"&&o.state==="by_call").length,j=i.filter(o=>o.state=="not_contacted").length,d=(w/i.length*100).toFixed(2),x=(v/i.length*100).toFixed(2),f=(u/i.length*100).toFixed(2),g=(m/i.length*100).toFixed(2),p=(j/i.length*100).toFixed(2),L={labels:t,datasets:[{data:[w,v,u,m,j],backgroundColor:["rgba(230, 151, 227, 0.9)","rgba(230, 138, 82, 0.9)","rgba(242, 252, 97, 0.9)","rgba(146, 122, 197, 0.9)","rgba(116, 172, 197, 0.9)"]}]},P={plugins:{legend:{display:!0,labels:{color:"white"}}}};return e.jsxs("div",{className:"flex flex-row w-[85%] p-10 gap-5 items-center",children:[e.jsx("p",{className:"text-white w-52",children:"Conocer los canales de calificacion de nuestro servicio usados por nuestros asociados es de gran importancia. Es por esto que en esta tabla podras encontrar los diferentes pocentajes y cantidad de turnos calificados por nuestros asociados."}),e.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 mt-20 rounded-lg w-[70%]",children:[e.jsxs("h5",{className:"text-white pb-3 text-sm",children:["Estados de Calificación de Turno en ",c]}),e.jsx("div",{className:"w-[380px]",children:e.jsx(I,{data:L,options:P})}),e.jsxs("table",{className:"text-white mt-8",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-center text-sm",children:"Estado de Turno"}),t.map((o,y)=>e.jsx("th",{className:"p-2 text-center text-sm",children:o},y))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 text-center text-sm",children:"Procentaje"}),e.jsxs("td",{className:"p-2 text-center text-sm",children:[d," %"]}),e.jsxs("td",{className:"p-2 text-center text-sm",children:[x," %"]}),e.jsxs("td",{className:"p-2 text-center text-sm",children:[f," %"]}),e.jsxs("td",{className:"p-2 text-center text-sm",children:[g," %"]}),e.jsxs("td",{className:"p-2 text-center text-sm",children:[p," %"]})]})]})]})]})}M.register(E,A,F,D,_,O,k,B);function q({name:r,time:l,typeScore:t,list:c,param:s}){const i=c,[a,n]=h.useState(i.reduce((d,x)=>(d[x]=b.filter(f=>f[s]===x).length,d),{})),[w,v]=h.useState(i.map(d=>(a[d]/b.length*100).toFixed(2))),[u,m]=h.useState("Todas las Sucursales");h.useEffect(()=>{const d=new Date;let x=d.getFullYear(),f=l===0?d.getMonth()+1:d.getMonth(),g;f==0?(x=d.getFullYear()-1,g=b.filter(o=>Number(o.date.split("-")[1])===12&&Number(o.date.split("-")[0])===x)):g=b.filter(o=>Number(o.date.split("-")[1])===f&&Number(o.date.split("-")[0])===x),l==2&&(f=d.getMonth()-1,f<0?g=b.filter(o=>Number(o.date.split("-")[1])>=12+f):g=b.filter(o=>Number(o.date.split("-")[1])>=f)),r=="all"&&m("Todas las Sucursales"),r!="all"&&(g=g.filter(o=>o.city===r),m(r));const p=i.reduce((o,y)=>(o[y]=g.filter(Y=>Y[s]===y).length,o),{});n(Object.values(p));const L=Object.values(p).reduce((o,y)=>o+y,0),P=i.map(o=>(p[o]/L*100).toFixed(2));v(P)},[r,l]);const j={labels:i,datasets:[{data:a,backgroundColor:["rgb(52, 104, 192)","rgb(134, 167, 252)","rgb(170, 217, 187)","rgb(250, 239, 155)","rgba(220, 19, 0, 0.5)"],borderWidth:2}]};return e.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 rounded-lg w-[43%] h-auto",children:[e.jsxs("h4",{className:"text-white",children:["Calificación ",t,", ",u]}),e.jsx(G,{data:j,options:z}),e.jsxs("table",{className:"text-white mt-8",children:[e.jsx("tr",{children:i.map((d,x)=>e.jsx("th",{className:"p-2 text-center",children:d},x))}),e.jsx("tr",{children:w.map((d,x)=>e.jsxs("td",{className:"p-2 text-center",children:[d,"%"]},x))})]})]})}function Q({name:r,time:l}){return e.jsxs("div",{className:"flex flex-col w-full items-center pt-5 pb-10",children:[e.jsx("h2",{className:"text-white text-2xl",children:"Calificaciones dadas por nuestros asosiados"}),e.jsx("p",{className:"text-white p-5 w-[800px] text-center",children:"Conocer el servicio brindado de nuestros asesores es de gran importancia. Pero conocer la percepcion de nuestros asociados es aun mas importante."}),e.jsx("p",{className:"text-white p-5 w-[1000px] text-center",children:"Eso por esto que acontinuación podras encontrar la percepción del servicio, atencion, tiempo de sus visitas y si nuestros asociados nos recomendarian con un amigo o conocido."}),e.jsxs("div",{className:"flex flex-wrap gap-10 m-5 justify-center items-center",children:[e.jsx(q,{name:r,time:l,typeScore:"Servicio",list:["Excelente","Bueno","Normal","Regular","Malo"],param:"score_service"}),e.jsx(q,{name:r,time:l,typeScore:"Tiempo",list:["Muy rápido","Rápido","Normal","Lento","Muy Lento"],param:"score_time"}),e.jsx(q,{name:r,time:l,typeScore:"Solicitud Atendida",list:["Si","No"],param:"score_att"}),e.jsx(q,{name:r,time:l,typeScore:"Recomendación",list:["Si","Tal vez","No"],param:"score_recommen"})]})]})}M.register(E,$,A,F,D,_,O,k,B);function V(r,l){const t=new Date;let c=t.getFullYear(),s=l===0?t.getMonth()+1:t.getMonth(),i=b.filter(a=>Number(a.date.split("-")[1])===s);return s==0?(c=t.getFullYear()-1,i=b.filter(a=>Number(a.date.split("-")[1])===12&&Number(a.date.split("-")[0])===c)):i=b.filter(a=>Number(a.date.split("-")[1])===s&&Number(a.date.split("-")[0])===c),l==2&&(s=t.getMonth()-1,s<0?i=b.filter(a=>Number(a.date.split("-")[1])>=12+s):i=b.filter(a=>Number(a.date.split("-")[1])>=s)),r==="all"?i:i.filter(a=>a.city===r)}function U(r,l,t){return r.reduce((c,s)=>{if(s[l]&&s[t]){let i=s[l].substring(0,10),a=s[t].substring(0,10);if(s.date==i&&s.date==a){let n=new Date(s[l]),v=(new Date(s[t]).getTime()-n.getTime())/6e4;c[s.date]?c[s.date]=(c[s.date]+v)/2:c[s.date]=v}}return c},{})}function W(r){return Object.values(r).reduce((l,t)=>l+t,0)/Object.values(r).length}function X(r,l,t){return{labels:r,datasets:[{data:l,borderColor:"rgb(75, 192, 192)",pointBackgroundColor:"rgba(185, 182, 25)",tension:.3},{data:t,borderColor:"rgb(238, 80, 192)",pointBackgroundColor:"rgba(75, 132, 255)",tension:.3}]}}function Z({name:r,time:l}){const[t,c]=h.useState(b),[s,i]=h.useState();h.useEffect(()=>{const x=V(r,l);c(x),i(r==="all"?"Todas las Sucursales":r)},[r,l]);const a=U(t,"arrival_time","await_time"),n=U(t,"await_time","atention_time"),w=W(a),v=W(n),u=Object.keys(a),m=Object.values(a),j=Object.values(n),d=X(u,m,j);return e.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 rounded-lg w-[80%] h-auto",children:[e.jsxs("h4",{className:"text-white",children:["Tiempo de Espera en ",s]}),e.jsx(H,{data:d,options:z}),e.jsxs("div",{className:"flex flex-row gap-16 pt-4",children:[e.jsxs("h3",{className:"text-[rgb(22,234,234)]",children:["Espera promedio:  ",w.toFixed(2)," Min"]}),e.jsxs("h3",{className:"text-[rgba(248,106,213)]",children:["Atencion promedio:  ",v.toFixed(2)," Min"]})]})]})}function ee({name:r,time:l}){return e.jsxs("div",{className:"flex flex-col items-center w-full p-10",children:[e.jsx("h2",{className:"text-white text-2xl p-5",children:"Tiempos de Atención a nuestros Asociados"}),e.jsxs("div",{className:"flex flex-row w-[100%] items-center justify-center",children:[e.jsx("p",{className:"text-white w-[400px]",children:"Los tiempos de espera y atención de nuestros asociados son de gran importancia para nosotros. Es por esto que conocer los tiempos promedios de antencion a nivel general y por sucursales, nos permitiran mejorar y organizar mejor nuestro servicio."}),e.jsx("div",{className:"flex flex-col w-full items-center pt-5",children:e.jsx(Z,{name:r,time:l})})]})]})}M.register(E,$,A,F,D,_,O,k,B);function te({name:r,time:l}){h.useState([]);const[t,c]=h.useState([]);h.useEffect(()=>{const n=ae(r,l,b);c(se(n))},[r,l]);const s=Object.keys(t),i=Object.values(t),a={labels:s,datasets:[{label:"Turnos en el Tiempo",data:i,borderColor:"rgb(75, 192, 192)",pointBackgroundColor:"rgba(75, 132, 255)",tension:.3}]};return e.jsxs("div",{className:"flex flex-row w-[85%] p-10 gap-5 items-center",children:[e.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 rounded-lg w-[70%] h-auto",children:[e.jsx("h4",{className:"text-white",children:"Cantidad de Turnos Tomados por Fecha"}),e.jsx(H,{data:a,options:z})]}),e.jsx("p",{className:"text-white w-52",children:"En esta grafica podras encontrar el numero de turnos tomados por dia a nivel general o en cada una de las sucursales. En la cual se podra determinar que dias y que fechas del mes presentamos mayor cantidad de visitas de nuestros asociados."})]})}function se(r){return r.reduce((l,t)=>(l[t.date]?l[t.date]++:l[t.date]=1,l),{})}function ae(r,l,t){const c=new Date;let s=c.getFullYear(),i=l===0?c.getMonth()+1:c.getMonth(),a;return i==0?(s=c.getFullYear()-1,a=t.filter(n=>Number(n.date.split("-")[1])===12&&Number(n.date.split("-")[0])===s)):a=t.filter(n=>Number(n.date.split("-")[1])===i&&Number(n.date.split("-")[0])===s),l===2&&(i=c.getMonth()-1,i<0?a=t.filter(n=>Number(n.date.split("-")[1])>=12+i&&Number(n.date.split("-")[0])===s):a=t.filter(n=>Number(n.date.split("-")[1])>=i&&Number(n.date.split("-")[0])===s)),r==="all"?a:a.filter(n=>n.city===r)}function ce(){const r=b.map(n=>n.city),l=[...new Set(r)],[t,c]=h.useState("all"),[s,i]=h.useState(0);function a(n,w){c(n),i(w)}return e.jsxs("div",{className:"flex flex-col gap-10 justify-center items-center",children:[e.jsxs("nav",{className:"flex flex-col p-3 px-10 mt-5 fixed top-0 bg-zinc-700 rounded-lg items-center",children:[e.jsxs("ul",{className:"flex flex-row gap-10",children:[e.jsx("button",{className:t==="all"?"text-white text-xl":"text-zinc-400 hover:scale-110  hover:text-white",onClick:()=>a("all",s),children:"Global"},"todos"),l.map(n=>e.jsx("button",{className:t===n?"text-white text-xl":"text-zinc-400 hover:scale-110  hover:text-white",onClick:()=>a(n,s),children:n},n))]}),e.jsxs("ul",{className:"flex flex-row gap-10 text-zinc-400",children:[e.jsx("button",{className:s===0?"text-white text-xl":"text-zinc-400 hover:scale-110 hover:text-white",onClick:()=>a(t,0),children:"Mes Actual"}),e.jsx("button",{className:s===1?"text-white text-xl":"text-zinc-400 hover:scale-110 hover:text-white",onClick:()=>a(t,1),children:"Ultimo mes"}),e.jsx("button",{className:s===2?"text-white text-xl":"text-zinc-400 hover:scale-110 hover:text-white",onClick:()=>a(t,2),children:"Ultimos 3 meses"})]})]}),e.jsx("h3",{className:"text-white flex mt-28",children:"Poder conocer los datos generales es bueno, pero poder conocer los datos por sucursal es genial."}),e.jsx(J,{name:t,time:s}),e.jsx(te,{name:t,time:s}),e.jsx(K,{name:t,time:s}),e.jsx(Q,{name:t,time:s}),e.jsx(ee,{name:t,time:s})]})}export{ce as default};
