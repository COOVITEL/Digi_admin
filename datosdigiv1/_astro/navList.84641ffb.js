import{j as u}from"./jsx-runtime.a2dc3690.js";import{T as g}from"./dates.88674acf.js";import{r as f}from"./index.72123234.js";import{C as p,a as x,P as N,A as v,L as A,B as w,p as j,b as S,c as C,d as M,f as H,g as P}from"./index.f8b4ff70.js";import{a as T,o as W}from"./options.f2ef4408.js";const h=[{cc:1033747211,name:"RINCON ARROYO BRIGITTE LORENA",sucursal:"Bogotá",turns:""},{cc:1022349157,name:"CUBIDES SANDOVAL ALEJANDRA JULIETH",sucursal:"Bogotá",turns:""},{cc:1014199690,name:"RODRIGUEZ RUGE LEIDY JOHANNA",sucursal:"Bogotá",turns:""},{cc:1099544827,name:"MORENO GÓMEZ YIS NEDY",sucursal:"Tunja",turns:""},{cc:40023301,name:"PEROLLA PERILLA BETTY JANETH",sucursal:"Tunja",turns:""},{cc:1049608012,name:"SALINAS BERNAL JENNY ELIABETH",sucursal:"Tunja",turns:""}];p.register(x,N,v,A,w,j,S,C);function R(l,r,i,c){const s=new Date;let o=s.getFullYear(),t=c===0?s.getMonth()+1:s.getMonth(),a;t==0?(o=s.getFullYear()-1,a=r.filter(e=>Number(e.date.split("-")[1])===12&&Number(e.date.split("-")[0])===o)):a=r.filter(e=>Number(e.date.split("-")[1])===t&&Number(e.date.split("-")[0])===o),c==2&&(t=s.getMonth()-1,t<0?a=r.filter(e=>Number(e.date.split("-")[1])>=12+t):a=r.filter(e=>Number(e.date.split("-")[1])>=t));let d=[];for(const e of l)e.sucursal===i&&(e.turns=a.filter(m=>m.adviser==e.cc).length,d.push(e));return d}function Z({name:l,time:r}){const[i,c]=f.useState(R(h,g,l,r));f.useEffect(()=>{c(R(h,g,l,r))},[l,r]);const s=i.map(a=>a.name),o=i.map(a=>a.turns),t={labels:s,datasets:[{data:o,backgroundColor:["rgba(255, 99, 132, 0.5)","rgba(183, 46, 168, 0.5)","rgba(72, 209, 168, 0.5)","rgba(12, 22, 34, 0.5)","rgba(45, 112, 232, 0.5)","rgba(220, 19, 0, 0.5)","rgba(255, 99, 132, 0.5)","rgba(22, 67, 111, 0.5)"],borderColor:["rgba(255, 99, 132)","rgba(183, 46, 168)","rgba(72, 209, 168)","rgba(72, 209, 0)","rgba(220, 19, 0)","rgba(255, 99, 132)","rgba(183, 46, 168)","rgba(72, 209, 168)"],borderWidth:2}]};return u.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 mt-28 rounded-lg w-[65%] h-auto",children:[u.jsx("h4",{className:"text-white font-bold",children:"Cantidad de turnos tomados por cada Asesor"}),u.jsx(M,{data:t,options:T})]})}p.register(x,N,v,A,w,j,S,C);function q({name:l,time:r}){const c=h.filter(e=>e.sucursal===l).map(e=>e.name),[s,o]=f.useState(B(h,g,l,r)),[t,a]=f.useState(s);f.useEffect(()=>{let e=B(h,g,l,r);o(e)},[l,r]),f.useEffect(()=>{let e=V(s);a(e)},[s]);const d={labels:c,datasets:[{label:"Si",data:t[0],backgroundColor:"rgba(54, 162, 235, 0.8)"},{label:"No",data:t[1],backgroundColor:"rgba(255, 99, 132, 0.8)"}]};return u.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 rounded-lg w-[800px] h-auto",children:[u.jsx("h4",{className:"text-white font-bold",children:"Calificación sobre el tiempo de Atención"}),u.jsx(M,{data:d,options:T})]})}function V(l){let r=[],i=[];for(const c of l)r.push(c[0]),i.push(c[1]);return[r,i]}function B(l,r,i,c){const s=new Date;let o=s.getFullYear(),t=c===0?s.getMonth()+1:s.getMonth(),a;t==0?(o=s.getFullYear()-1,a=r.filter(e=>Number(e.date.split("-")[1])===12&&Number(e.date.split("-")[0])===o)):a=r.filter(e=>Number(e.date.split("-")[1])===t&&Number(e.date.split("-")[0])===o),c==2&&(t=s.getMonth()-1,t<0?a=r.filter(e=>Number(e.date.split("-")[1])>=12+t):a=r.filter(e=>Number(e.date.split("-")[1])>=t));let d=[];for(const e of l)if(e.sucursal===i){let m=[a.filter(n=>n.adviser==e.cc&&n.score_att==="Si").length,a.filter(n=>n.adviser==e.cc&&n.score_att==="No").length];d.push(m)}return d}p.register(x,N,v,A,w,j,S,C);function K({name:l,time:r}){const c=h.filter(e=>e.sucursal===l).map(e=>e.name),[s,o]=f.useState(O(h,g,l,r)),[t,a]=f.useState(s);f.useEffect(()=>{let e=O(h,g,l,r);o(e)},[l,r]),f.useEffect(()=>{let e=Q(s);a(e)},[s]);const d={labels:c,datasets:[{label:"Si",data:t[0],backgroundColor:"rgba(54, 162, 235, 0.8)"},{label:"Tal vez",data:t[1],backgroundColor:"rgba(255, 206, 86, 0.8)"},{label:"No",data:t[2],backgroundColor:"rgba(255, 99, 132, 0.8)"}]};return u.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 rounded-lg w-[800px] h-auto",children:[u.jsx("h4",{className:"text-white font-bold",children:"Calificación sobre el tiempo de Atención"}),u.jsx(M,{data:d,options:T})]})}function Q(l){let r=[],i=[],c=[];for(const s of l)r.push(s[0]),i.push(s[1]),c.push(s[2]);return[r,i]}function O(l,r,i,c){const s=new Date;let o=s.getFullYear(),t=c===0?s.getMonth()+1:s.getMonth(),a;t==0?(o=s.getFullYear()-1,a=r.filter(e=>Number(e.date.split("-")[1])===12&&Number(e.date.split("-")[0])===o)):a=r.filter(e=>Number(e.date.split("-")[1])===t&&Number(e.date.split("-")[0])===o),c==2&&(t=s.getMonth()-1,t<0?a=r.filter(e=>Number(e.date.split("-")[1])>=12+t):a=r.filter(e=>Number(e.date.split("-")[1])>=t));let d=[];for(const e of l)if(e.sucursal===i){let m=[a.filter(n=>n.adviser==e.cc&&n.score_recommen==="Si").length,a.filter(n=>n.adviser==e.cc&&n.score_recommen==="Tal vez").length,a.filter(n=>n.adviser==e.cc&&n.score_recommen==="No").length];d.push(m)}return d}p.register(x,N,v,A,w,j,S,C);function X({name:l,time:r}){const c=h.filter(e=>e.sucursal===l).map(e=>e.name),[s,o]=f.useState(Y(h,g,l,r)),[t,a]=f.useState(s);f.useEffect(()=>{let e=Y(h,g,l,r);o(e)},[l,r]),f.useEffect(()=>{let e=ee(s);a(e)},[s]);const d={labels:c,datasets:[{label:"Excelente",data:t[0],backgroundColor:"rgba(54, 162, 235, 0.8)"},{label:"Buena",data:t[1],backgroundColor:"rgba(153, 102, 255, 0.8)"},{label:"Normal",data:t[2],backgroundColor:"rgba(255, 206, 86, 0.8)"},{label:"Regular",data:t[3],backgroundColor:"rgba(75, 192, 192, 0.8)"},{label:"Malo",data:t[4],backgroundColor:"rgba(255, 99, 132, 0.8)"}]};return u.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 rounded-lg w-[800px] h-auto",children:[u.jsx("h4",{className:"text-white font-bold",children:"Calificación sobre el Servicio Brindado"}),u.jsx(M,{data:d,options:T})]})}function ee(l){let r=[],i=[],c=[],s=[],o=[];for(const t of l)r.push(t[0]),i.push(t[1]),c.push(t[2]),s.push(t[3]),o.push(t[4]);return[r,i,c,s,o]}function Y(l,r,i,c){const s=new Date;let o=s.getFullYear(),t=c===0?s.getMonth()+1:s.getMonth(),a;t==0?(o=s.getFullYear()-1,a=r.filter(e=>Number(e.date.split("-")[1])===12&&Number(e.date.split("-")[0])===o)):a=r.filter(e=>Number(e.date.split("-")[1])===t&&Number(e.date.split("-")[0])===o),c==2&&(t=s.getMonth()-1,t<0?a=r.filter(e=>Number(e.date.split("-")[1])>=12+t):a=r.filter(e=>Number(e.date.split("-")[1])>=t));let d=[];for(const e of l)if(e.sucursal===i){let m=[a.filter(n=>n.adviser==e.cc&&n.score_service==="Excelente").length,a.filter(n=>n.adviser==e.cc&&n.score_service==="Bueno").length,a.filter(n=>n.adviser==e.cc&&n.score_service==="Normal").length,a.filter(n=>n.adviser==e.cc&&n.score_service==="Regular").length,a.filter(n=>n.adviser==e.cc&&n.score_service==="Malo").length];d.push(m)}return d}p.register(x,N,v,A,w,j,S,C);function te({name:l,time:r}){const c=h.filter(e=>e.sucursal===l).map(e=>e.name),[s,o]=f.useState(F(h,g,l,r)),[t,a]=f.useState(s);f.useEffect(()=>{let e=F(h,g,l,r);o(e)},[l,r]),f.useEffect(()=>{let e=se(s);a(e)},[s]);const d={labels:c,datasets:[{label:"Muy rápido",data:t[0],backgroundColor:"rgba(54, 162, 235, 0.8)"},{label:"Rápido",data:t[1],backgroundColor:"rgba(153, 102, 255, 0.8)"},{label:"Normal",data:t[2],backgroundColor:"rgba(255, 206, 86, 0.8)"},{label:"Lento",data:t[3],backgroundColor:"rgba(75, 192, 192, 0.8)"},{label:"Muy Lento",data:t[4],backgroundColor:"rgba(255, 99, 132, 0.8)"}]};return u.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 rounded-lg w-[800px] h-auto",children:[u.jsx("h4",{className:"text-white font-bold",children:"Calificación sobre el tiempo de Atención"}),u.jsx(M,{data:d,options:T})]})}function se(l){let r=[],i=[],c=[],s=[],o=[];for(const t of l)r.push(t[0]),i.push(t[1]),c.push(t[2]),s.push(t[3]),o.push(t[4]);return[r,i,c,s,o]}function F(l,r,i,c){const s=new Date;let o=s.getFullYear(),t=c===0?s.getMonth()+1:s.getMonth(),a;t==0?(o=s.getFullYear()-1,a=r.filter(e=>Number(e.date.split("-")[1])===12&&Number(e.date.split("-")[0])===o)):a=r.filter(e=>Number(e.date.split("-")[1])===t&&Number(e.date.split("-")[0])===o),c==2&&(t=s.getMonth()-1,t<0?a=r.filter(e=>Number(e.date.split("-")[1])>=12+t):a=r.filter(e=>Number(e.date.split("-")[1])>=t));let d=[];for(const e of l)if(e.sucursal===i){let m=[a.filter(n=>n.adviser==e.cc&&n.score_time==="Muy rápido").length,a.filter(n=>n.adviser==e.cc&&n.score_time==="Rápido").length,a.filter(n=>n.adviser==e.cc&&n.score_time==="Normal").length,a.filter(n=>n.adviser==e.cc&&n.score_time==="Lento").length,a.filter(n=>n.adviser==e.cc&&n.score_time==="Muy Lento").length];d.push(m)}return d}function re({name:l,time:r}){return u.jsxs("div",{className:"flex flex-col w-full items-center pt-5",children:[u.jsx("h2",{className:"text-white text-2xl font-bold",children:"Calificaciones dadas por nuestros asociados"}),u.jsxs("div",{className:"flex flex-wrap gap-10 m-5 justify-center items-center",children:[u.jsx(X,{name:l,time:r}),u.jsx(te,{name:l,time:r}),u.jsx(q,{name:l,time:r}),u.jsx(K,{name:l,time:r})]})]})}p.register(x,H,N,v,A,w,j,S,C);function ae(l,r){const i=new Date;let c=i.getFullYear(),s=r===0?i.getMonth()+1:i.getMonth(),o=g.filter(t=>Number(t.date.split("-")[1])===s);return s==0?(c=i.getFullYear()-1,o=g.filter(t=>Number(t.date.split("-")[1])===12&&Number(t.date.split("-")[0])===c)):o=g.filter(t=>Number(t.date.split("-")[1])===s&&Number(t.date.split("-")[0])===c),r==2&&(s=i.getMonth()-1,s<0?o=g.filter(t=>Number(t.date.split("-")[1])>=12+s):o=g.filter(t=>Number(t.date.split("-")[1])>=s)),l==="all"?o:o.filter(t=>t.city===l)}function I(l){return Object.values(l).reduce((r,i)=>r+i,0)/Object.values(l).length}function $(l,r,i,c){return l.reduce((s,o)=>{if(o[r]&&o[i]&&o.adviser==c){let t=o[r].substring(0,10),a=o[i].substring(0,10);if(o.date==t&&o.date==a){let d=new Date(o[r]),m=(new Date(o[i]).getTime()-d.getTime())/6e4;s[o.date]?s[o.date]=(s[o.date]+m)/2:s[o.date]=m}}return s},{})}function z(l,r,i){let c=[];for(const s of i)if(s.sucursal===l){const o={name:s.name,await:$(r,"arrival_time","await_time",s.cc),atten:$(r,"await_time","atention_time",s.cc)};c.push(o)}return c}function le(l,r,i,c){const s=["rgb(56,135,190)","rgb(159,187,115)","rgb(236,143,94)"],o=["rgb(82,211,216)","rgb(225,236,200)","rgb(243,182,100)"];let t=[];for(let a=0;a<r.length;a++)t.push({label:`Tiempo de espera ${c[a]}`,data:r[a],borderColor:s[a],pointBackgroundColor:s[a],tension:.3}),t.push({label:"Tiempo de Atención",data:i[a],borderColor:o[a],pointBackgroundColor:o[a],tension:.3});return{labels:l,datasets:t}}function oe({name:l,time:r}){const[i,c]=f.useState(g),[s,o]=f.useState(),[t,a]=f.useState(z(l,i,h));f.useEffect(()=>{const b=ae(l,r);c(b),o(l==="all"?"Todas las Sucursales":l)},[l,r]),f.useEffect(()=>{a(z(l,i,h))},[i]);let d=h.filter(b=>b.sucursal===l).length,e=[],m=[],n=[];for(let b=0;b<d;b++)e.push(t[b].name),m.push(t[b].await),n.push(t[b].atten);let L=[],k=[];for(let b=0;b<e.length;b++)k.push(I(m[b])),L.push(I(n[b]));const U=i.map(b=>b.date),J=[...new Set(U)];let _=[],y=[];for(let b=0;b<e.length;b++)_.push(Object.values(m[b])),y.push(Object.values(n[b]));const G=le(J,_,y,e),D=[["text-[rgb(12,128,205)]","text-[rgb(56,135,190)]","text-[rgb(82,211,216)]"],["text-[rgb(159,187,115)]","text-[rgb(159,187,115)]","text-[rgb(225,236,200)]"],["text-[rgb(236,143,94)]","text-[rgb(236,143,94)]","text-[rgb(243,182,100)]"]];return u.jsxs("div",{className:"flex flex-col justify-center items-center border-2 p-5 rounded-lg w-[67%] h-auto",children:[u.jsxs("h4",{className:"text-white font-bold",children:["Tiempo de Espera en ",s]}),u.jsx(P,{data:G,options:W}),u.jsx("div",{className:"flex flex-row gap-16 pt-4",children:e.map((b,E)=>u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsx("h4",{className:`${D[E][0]} text-sm text-center`,children:b}),u.jsxs("h4",{className:`${D[E][1]} text-sm text-center`,children:["Espera promedio:  ",k[E].toFixed(2)," Min"]}),u.jsxs("h4",{className:`${D[E][2]} text-sm text-center`,children:["Atencion promedio:  ",L[E].toFixed(2)," Min"]})]}))})]})}function fe(){const l=g.map(a=>a.city),r=[...new Set(l)],[i,c]=f.useState("Bogotá"),[s,o]=f.useState(0);function t(a,d){c(a),o(d)}return u.jsxs("div",{className:"flex flex-col gap-10 justify-center items-center",children:[u.jsxs("nav",{className:"flex flex-col p-3 px-20 mt-5 fixed top-0 bg-zinc-700 rounded-lg items-center",children:[u.jsx("ul",{className:"flex flex-row gap-10",children:r.map(a=>u.jsx("button",{className:i===a?"text-white text-xl":"text-zinc-400 hover:scale-110  hover:text-white",onClick:()=>t(a,s),children:a},a))}),u.jsxs("ul",{className:"flex flex-row gap-10 text-zinc-400",children:[u.jsx("button",{className:s===0?"text-white text-xl":"text-zinc-400 hover:scale-110 hover:text-white",onClick:()=>t(i,0),children:"Mes Actual"}),u.jsx("button",{className:s===1?"text-white text-xl":"text-zinc-400 hover:scale-110 hover:text-white",onClick:()=>t(i,1),children:"Ultimo mes"}),u.jsx("button",{className:s===2?"text-white text-xl":"text-zinc-400 hover:scale-110 hover:text-white",onClick:()=>t(i,2),children:"Ultimos 3 meses"})]})]}),u.jsx(Z,{name:i,time:s}),u.jsx(re,{name:i,time:s}),u.jsx(oe,{name:i,time:s})]})}export{fe as default};
